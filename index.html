<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نوژشاپ - فروشگاه لوازم آرایشی و بهداشتی</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <style>
    body { background: #f9f9fb; font-family: "Tahoma", sans-serif; }
    header, footer { background-color: #d63384; color: white; padding: 1rem 0; }
    .product-img { height: 200px; object-fit: cover; border-radius: 10px; }
    .trust-logo { height: 60px; margin-left: 15px; }
    nav a.nav-link.active { font-weight: bold; color: #d63384 !important; }
    #adminPanel { display: none; }
    #loginPanel { max-width: 400px; margin: 2rem auto; }
  </style>
</head>
<body>

<header class="text-center">
  <h1>نوژشاپ</h1>
  <p>فروشگاه آنلاین لوازم آرایشی و بهداشتی</p>
</header>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="#home">نوژشاپ</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
      aria-controls="navbarNav" aria-expanded="false" aria-label="نمایش فهرست">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link active" href="#home">خانه</a></li>
        <li class="nav-item"><a class="nav-link" href="#products">محصولات</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">تماس با ما</a></li>
        <li class="nav-item"><a class="nav-link" href="#" id="adminBtn">مدیریت سایت</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container my-4">

  <!-- بخش خانه -->
  <section id="home" class="mb-5 text-center">
    <h2>به نوژشاپ خوش آمدید!</h2>
    <p style="max-width: 600px; margin: auto; font-size: 1.1rem; color: #555;">
      تو نوژشاپ، ما باور داریم زیبایی حق همه‌ست.  
      محصولات باکیفیت و تازه‌ترین برندهای آرایشی و بهداشتی رو با قیمت مناسب براتون فراهم کردیم.  
      تیم ما همیشه آماده‌ست تا بهترین‌ها رو به دست شما برسونه و تجربه خریدی راحت و لذت‌بخش داشته باشید.  
      با نوژشاپ، درخشش و سلامت پوست و مو رو به خودتون هدیه بدید!  
    </p>
  </section>

  <!-- بخش محصولات -->
  <section id="products" class="mb-5">
    <h2 class="mb-4 text-center">محصولات ما</h2>
    <div class="row g-4" id="productList">
      <!-- محصولات اینجا با JS اضافه میشن -->
    </div>
  </section>

  <!-- بخش سفارشات -->
  <section id="ordersSection" style="display:none;" class="mb-5">
    <h2 class="mb-4 text-center">سفارشات ثبت شده</h2>
    <ul class="list-group" id="orderList">
      <!-- سفارشات اینجا با JS اضافه میشن -->
    </ul>
  </section>

  <!-- بخش تماس با ما -->
  <section id="contact" class="mb-5 text-center">
    <h2>تماس با ما</h2>
    <p>برای سفارش و سوالات، در تلگرام با ما در ارتباط باشید:</p>
    <a href="https://t.me/noj1385" target="_blank" class="btn btn-primary">آیدی تلگرام: @noj1385</a>
  </section>

  <!-- پنل ورود مدیریت -->
  <section id="loginPanel">
    <h3 class="text-center">ورود مدیریت</h3>
    <input type="password" id="adminPassword" class="form-control mb-3" placeholder="رمز عبور را وارد کنید" />
    <button id="loginBtn" class="btn btn-danger w-100">ورود</button>
    <p id="loginError" class="text-danger mt-2" style="display:none;">رمز عبور اشتباه است.</p>
  </section>

  <!-- پنل مدیریت -->
  <section id="adminPanel" class="mb-5">
    <h2 class="mb-4 text-center">پنل مدیریت</h2>

    <!-- فرم افزودن محصول -->
    <div class="mb-4">
      <h4>افزودن محصول جدید</h4>
      <input type="text" id="newTitle" class="form-control mb-2" placeholder="نام محصول" />
      <input type="text" id="newPrice" class="form-control mb-2" placeholder="قیمت (تومان)" />
      <input type="text" id="newImage" class="form-control mb-2" placeholder="لینک تصویر" />
      <button id="addProductBtn" class="btn btn-success">افزودن محصول</button>
    </div>

    <!-- لیست محصولات قابل حذف و ویرایش -->
    <div>
      <h4>مدیریت محصولات</h4>
      <ul class="list-group" id="manageProductList"></ul>
    </div>

    <!-- لیست سفارشات قابل حذف -->
    <div class="mt-4">
      <h4>سفارشات ثبت شده</h4>
      <ul class="list-group" id="manageOrderList"></ul>
    </div>

    <button id="logoutBtn" class="btn btn-secondary mt-4">خروج از مدیریت</button>
  </section>

</main>

<footer class="text-center">
  <div class="container d-flex justify-content-center align-items-center flex-wrap">
    <img src="https://trustseal.enamad.ir/logo.aspx?id=124674&amp;Code=e5LfFkIfiWLnlq2FrP01" 
         alt="نماد اعتماد الکترونیکی" class="trust-logo" />
    <span>© ۲۰۲۵ نوژشاپ - تمامی حقوق محفوظ است</span>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // داده‌های اولیه محصولات (مثال)
  let products = [
    {id: 1, title: "کرم مرطوب‌کننده", price: "۲۵۰,۰۰۰ تومان", image: "https://cdn.pixabay.com/photo/2016/03/27/21/17/cosmetics-1284258_1280.jpg"},
    {id: 2, title: "رژ لب مایع مات", price: "۱۵۰,۰۰۰ تومان", image: "https://cdn.pixabay.com/photo/2018/03/06/22/20/lipstick-3209793_1280.jpg"},
    {id: 3, title: "سرم ویتامین C", price: "۳۲۰,۰۰۰ تومان", image: "https://cdn.pixabay.com/photo/2017/07/10/19/02/serum-2497527_1280.jpg"},
  ];

  // سفارش‌ها (آغاز خالی)
  let orders = [];

  // المان‌ها
  const productList = document.getElementById("productList");
  const manageProductList = document.getElementById("manageProductList");
  const manageOrderList = document.getElementById("manageOrderList");
  const ordersSection = document.getElementById("ordersSection");
  const adminPanel = document.getElementById("adminPanel");
  const loginPanel = document.getElementById("loginPanel");
  const loginBtn = document.getElementById("loginBtn");
  const adminPasswordInput = document.getElementById("adminPassword");
  const loginError = document.getElementById("loginError");
  const adminBtn = document.getElementById("adminBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  // تابع نمایش محصولات در صفحه فروشگاه
  function showProducts() {
    productList.innerHTML = "";
    products.forEach(p => {
      const div = document.createElement("div");
      div.className = "col-12 col-md-4";
      div.innerHTML = `
        <div class="card shadow-sm">
          <img src="${p.image}" class="card-img-top product-img" alt="${p.title}" />
          <div class="card-body text-center">
            <h5 class="card-title">${p.title}</h5>
            <p class="card-text text-danger fw-bold">${p.price}</p>
            <button class="btn btn-danger buyBtn" data-id="${p.id}">خرید</button>
          </div>
        </div>`;
      productList.appendChild(div);
    });
    // وصل کردن رویداد کلیک خرید
    document.querySelectorAll(".buyBtn").forEach(btn => {
      btn.onclick = e => {
        const id = parseInt(e.target.dataset.id);
        addOrder(id);
      };
    });
  }

  // اضافه کردن سفارش (با فرم ساده و ذخیره در orders)
  function addOrder(productId) {
    const product = products.find(p => p.id === productId);
    if(!product) return alert("محصول یافت نشد");
    const name = prompt("نام شما:");
    if(!name) return alert("نام را وارد کنید");
    const phone = prompt("شماره تماس:");
    if(!phone) return alert("شماره تماس را وارد کنید");
    const address = prompt("آدرس:");
    if(!address) return alert("آدرس را وارد کنید");
    const postal = prompt("کد پستی:");
    if(!postal) return alert("کد پستی را وارد کنید");
    orders.push({
      id: Date.now(),
      productTitle: product.title,
      price: product.price,
      name, phone, address, postal
    });
    alert("سفارش شما ثبت شد. بعد از بررسی با شما تماس می‌گیریم.");
    if(adminPanel.style.display === "block") renderOrders();
  }

  // نمایش سفارشات در پنل مدیریت
  function renderOrders() {
    if(orders.length === 0) {
      manageOrderList.innerHTML = "<li class='list-group-item text-center'>سفارشی ثبت نشده</li>";
      return;
    }
    manageOrderList.innerHTML = "";
    orders.forEach(o => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        <div>
          <b>محصول:</b> ${o.productTitle} | <b>قیمت:</b> ${o.price} <br />
          <b>نام:</b> ${o.name} | <b>تلفن:</b> ${o.phone} <br />
          <b>آدرس:</b> ${o.address} | <b>کد پستی:</b> ${o.postal}
        </div>
        <button class="btn btn-danger btn-sm deleteOrderBtn" data-id="${o.id}">حذف</button>
      `;
      manageOrderList.appendChild(li);
    });
    // حذف سفارش
    document.querySelectorAll(".deleteOrderBtn").forEach(btn => {
      btn.onclick = e => {
        const id = parseInt(e.target.dataset.id);
        orders = orders.filter(o => o.id !== id);
        renderOrders();
        alert("سفارش حذف شد");
      };
    });
  }

  // نمایش محصولات در پنل مدیریت با قابلیت حذف و ویرایش عنوان و قیمت
  function renderManageProducts() {
    if(products.length === 0) {
      manageProductList.innerHTML = "<li class='list-group-item text-center'>محصولی وجود ندارد</li>";
      return;
    }
    manageProductList.innerHTML = "";
    products.forEach(p => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        <div style="flex-grow:1">
          <input type="text" class="form-control mb-1 productTitleInput" data-id="${p.id}" value="${p.title}" />
          <input type="text" class="form-control productPriceInput" data-id="${p.id}" value="${p.price}" />
          <input type="text" class="form-control productImageInput mt-1" data-id="${p.id}" value="${p.image}" />
        </div>
        <button class="btn btn-danger btn-sm deleteProductBtn" data-id="${p.id}">حذف</button>
      `;
      manageProductList.appendChild(li);
    });

    // اضافه کردن رویداد حذف محصول
    document.querySelectorAll(".deleteProductBtn").forEach(btn => {
      btn.onclick = e => {
        const id = parseInt(e.target.dataset.id);
        products = products.filter(p => p.id !== id);
        renderManageProducts();
        showProducts();
        alert("محصول حذف شد");
      };
    });

    // اضافه کردن رویداد تغییر عنوان و قیمت و عکس (با کمی تأخیر یا روی خروج از فیلد)
    document.querySelectorAll(".productTitleInput").forEach(input => {
      input.onchange = e => {
        const id = parseInt(e.target.dataset.id);
        const p = products.find(p => p.id === id);
        if(p) {
          p.title = e.target.value;
          showProducts();
        }
      };
    });
    document.querySelectorAll(".productPriceInput").forEach(input => {
      input.onchange = e => {
        const id = parseInt(e.target.dataset.id);
        const p = products.find(p => p.id === id);
        if(p) {
          p.price = e.target.value;
          showProducts();
        }
      };
    });
    document.querySelectorAll(".productImageInput").forEach(input => {
      input.onchange = e => {
        const id = parseInt(e.target.dataset.id);
        const p = products.find(p => p.id === id);
        if(p) {
          p.image = e.target.value;
          showProducts();
        }
      };
    });
  }

  // افزودن محصول جدید از فرم
  document.getElementById("addProductBtn").onclick = () => {
    const title = document.getElementById("newTitle").value.trim();
    const price = document.getElementById("newPrice").value.trim();
    const image = document.getElementById("newImage").value.trim();
    if(!title || !price || !image) {
      alert("لطفا همه فیلدها را پر کنید.");
      return;
    }
    const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
    products.push({id: newId, title, price, image});
    renderManageProducts();
    showProducts();
    document.getElementById("newTitle").value = "";
    document.getElementById("newPrice").value = "";
    document.getElementById("newImage").value = "";
  };

  // ورود به پنل مدیریت با رمز عبور
  loginBtn.onclick = () => {
    const pass = adminPasswordInput.value;
    if(pass === "1225") {
      loginPanel.style.display = "none";
      adminPanel.style.display = "block";
      ordersSection.style.display = "block";
      renderManageProducts();
      renderOrders();
      loginError.style.display = "none";
    } else {
      loginError.style.display = "block";
    }
  };

  // باز کردن پنل مدیریت با کلیک روی لینک
  adminBtn.onclick = (e) => {
    e.preventDefault();
    loginPanel.style.display = "block";
    adminPanel.style.display = "none";
    ordersSection.style.display = "none";
  };

  // خروج از مدیریت
  logoutBtn.onclick = () => {
    loginPanel.style.display = "block";
    adminPanel.style.display = "none";
    ordersSection.style.display = "none";
    adminPasswordInput.value = "";
  };

  // شروع نمایش محصولات در صفحه فروشگاه
  showProducts();

</script>

</body>
</html>
